# Build My Own Redis


## 

## 04-Protocol-Parsing

我们的服务器将能够处理来自客户端的多个请求, 为此我们需要实现某种“协议”, 至少要将请求从 TCP 字节流中分离出来. 协议由两个部分组成: 一个 4 字节的小端整数, 表示请求的长度, 和一个可变长度的请求. 

- read() 系统调用只返回内核中可用的数据, 因此, 我们需要处理这种不充分的读取, read_full() 函数使得我们可以从内核中读取, 一直满足读到正好 n 哥字节.

- write() 系统调用同理.

memcpy() 函数可以使得我们不用考虑大端小端, 将其作为一个字符串写入, 就没有大端小端的困恼了. 